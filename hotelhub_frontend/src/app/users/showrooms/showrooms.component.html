<app-userheader></app-userheader>

<!--================Blog Area =================-->
<section class="blog_area" style="padding-top: 120px;">
    <div class="container">
        <div class="row">

            <div class="col-lg-8" *ngIf="roomData.length > 0; else noRoomsTemplate">
                <div class="blog_left_sidebar">

                    <!-- Banner for Festival Discount -->
                    <div *ngIf="isFestivalToday()" class="festival-banner">
                        <div class="festival-banner-content">
                            <div class="festival-banner-header">
                                <h4>ðŸŽ‰ Festival Discount Active! ðŸŽ‰</h4>
                            </div>
                            <p>
                                <strong>{{ activeFestival?.festname }}</strong> is happening today! Don't miss out on
                                the special
                                discount. Enjoy exclusive offers and savings when you book a room today.
                            </p>
                            <p>
                                Hurry, this offer is valid for today only! Grab your discount now!
                            </p>
                        </div>
                    </div>

                    <!-- Room Listings -->
                    <article class="row blog_item card" *ngFor="let room of roomData">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="blog_info text-right">
                                        <div class="post_tag">
                                            <b>Facilities: </b>
                                            <a *ngFor="let fac of room.facilities.$values">{{" "}}{{fac}}</a>
                                        </div>
                                        <div class="post_tag">
                                            <b>Features: </b>
                                            <a *ngFor="let fea of room.features.$values">{{" "}}{{fea}}</a>
                                        </div>
                                        <ul class="blog_meta list_style">
                                            <li>
                                                <a><b>Capacity: </b>{{ room.adultCapacity }} Adults</a>
                                            </li>
                                            <li>
                                                <a>{{ room.childrenCapacity }} Children</a>
                                            </li>
                                            <li>
                                                <a><b>City: </b>{{ room.city }}</a>
                                            </li>
                                            <li>
                                                <a>
                                                    <b>Status: </b>
                                                    <span
                                                        [ngClass]="{'text-danger': room.activeStatus === 0, 'badge bg-success': room.activeStatus !== 0}">
                                                        {{ room.activeStatus === 0 ? 'Disactive Room' : 'Active Room' }}
                                                    </span>
                                                </a>
                                            </li>
                                            <li>
                                                <a><b>Discount: </b>{{ getDiscount(room) }}%</a>
                                            </li>
                                            <li>
                                                <!-- Loop to display stars -->
                                                <ng-container
                                                    *ngFor="let star of [].constructor(room.averageRating); let i = index">
                                                    <!-- <i class="fas fa-star text-warning"></i> -->
                                                    <span class="text-warning" style="font-size: 2em;">&#9733;</span>
                                                </ng-container>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="col-md-9">
                                    <div class="blog_post">
                                        <img [src]="'http://localhost:5161/uploads/roomimages/' + room.firstImage"
                                            alt="Room Image" class="img-fluid room-image" />
                                        <div class="blog_details">
                                            <a>
                                                <h2>{{ room.categoryName }}</h2>
                                            </a>
                                            <h3>
                                                <del style="color: red;">{{ room.rent | currency: 'INR' }}</del>
                                                {{ (room.rent) - ((room.rent * getDiscount(room)) / 100) | currency:
                                                'INR' }}
                                            </h3>
                                            <button (click)="roomdetails(room.id)" class="view_btn button_hover"
                                                [disabled]="room.activeStatus === 0"
                                                [ngClass]="{'disabled-btn': room.activeStatus === 0}">
                                                View More
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </article>
                </div>
            </div>

            <ng-template #noRoomsTemplate>
                <div class="text-center">
                    <h3>No Rooms Available</h3>
                    <p>Please adjust your search criteria or try again later.</p>
                </div>
            </ng-template>

            <div class="col-lg-4">
                <div class="blog_right_sidebar">
                    <aside class="single_sidebar_widget popular_post_widget">
                        <h3 class="widget_title">Room Categories</h3>
                        <!-- Category Dropdown -->
                        <div class="col-md-12">
                            <div class="form-floating">
                                <select name="category" [(ngModel)]="searchRoom.categoryId" class="form-control"
                                    (change)="searchRoomsByCategory(searchRoom.categoryId)" required>
                                    <option value="" disabled selected>Select Category</option>
                                    <option *ngFor="let category of categoryData" [value]="category.id">
                                        {{ category.categoryName }}
                                    </option>
                                </select>
                                <label for="category">Room Category</label>
                            </div>
                        </div>
            
                        <h3 class="widget_title mt-5">Room Facilities</h3>
                        <!-- Facilities Checkboxes -->
                        <div class="col-md-12" *ngIf="facilityData.length > 0">
                            <div class="col-md-3">
                                <div *ngFor="let facility of facilityData">
                                    <input type="checkbox" [value]="facility.id"
                                        (change)="onFacilityChange(facility.id, $event)" class="form-check-input">
                                    <label class="form-check-label">{{ facility.facilityName }}</label>
                                </div>
                            </div>
                        </div>
            
                        <h3 class="widget_title mt-5">Room Features</h3>
                        <!-- Features Checkboxes -->
                        <div class="col-md-12" *ngIf="featuresData.length > 0">
                            <div class="col-md-3">
                                <div *ngFor="let feature of featuresData">
                                    <input type="checkbox" [value]="feature.id"
                                        (change)="onFeatureChange(feature.id, $event)" class="form-check-input">
                                    <label class="form-check-label">{{ feature.featureName }}</label>
                                </div>
                            </div>
                        </div>
            
                        <h3 class="widget_title mt-5">Rating</h3>
                        <!-- Rating -->
                        <div class="col-md-12">
                            <input type="text" [(ngModel)]="searchRoom.rating" class="form-control"
                                (change)="searchRoomsByRating(searchRoom.rating)" placeholder="Enter Rating...">
                        </div>
            
                        <h3 class="widget_title mt-5">Room Status</h3>
                        <!-- Room Status -->
                        <div class="col-md-12">
                            <div class="form-check">
                                <input type="radio" id="standardRoom" name="roomPreference" value="1"
                                    [(ngModel)]="searchRoom.isActive" (change)="searchRoomsByStatus(true)" class="form-check-input">
                                <label for="standardRoom" class="form-check-label">Active Room</label>
                            </div>
                            <div class="form-check">
                                <input type="radio" id="suiteRoom" name="roomPreference" value="0"
                                    [(ngModel)]="searchRoom.isActive" (change)="searchRoomsByStatus(false)" class="form-check-input">
                                <label for="suiteRoom" class="form-check-label">Inactive Room</label>
                            </div>
                        </div>
            
                    </aside>
                </div>
            </div>            

        </div>
    </div>
</section>
<!--================Blog Area =================-->

<!--================ start footer Area  =================-->
<footer class="footer-area section_gap">
    <div class="container">
        <div class="row">
            <div class="col-lg-3  col-md-6 col-sm-6">
                <div class="single-footer-widget">
                    <h6 class="footer_title">About Agency</h6>
                    <p>The world has become so fast paced that people donâ€™t want to stand by reading a page of
                        information, they would much rather look at a presentation and understand the message. It
                        has come to a point </p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="single-footer-widget">
                    <h6 class="footer_title">Navigation Links</h6>
                    <div class="row">
                        <div class="col-4">
                            <ul class="list_style">
                                <li><a href="#">Home</a></li>
                                <li><a href="#">Feature</a></li>
                                <li><a href="#">Services</a></li>
                                <li><a href="#">Portfolio</a></li>
                            </ul>
                        </div>
                        <div class="col-4">
                            <ul class="list_style">
                                <li><a href="#">Team</a></li>
                                <li><a href="#">Pricing</a></li>
                                <li><a href="#">Blog</a></li>
                                <li><a href="#">Contact</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="single-footer-widget">
                    <h6 class="footer_title">Newsletter</h6>
                    <p>For business professionals caught between high OEM price and mediocre print and graphic
                        output, </p>
                    <div id="mc_embed_signup">
                        <form target="_blank"
                            action="https://spondonit.us12.list-manage.com/subscribe/post?u=1462626880ade1ac87bd9c93a&amp;id=92a4423d01"
                            method="get" class="subscribe_form relative">
                            <div class="input-group d-flex flex-row">
                                <input name="EMAIL" placeholder="Email Address" onfocus="this.placeholder = ''"
                                    onblur="this.placeholder = 'Email Address '" required="" type="email">
                                <button class="btn sub-btn"><span class="lnr lnr-location"></span></button>
                            </div>
                            <div class="mt-10 info"></div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="single-footer-widget instafeed">
                    <h6 class="footer_title">InstaFeed</h6>
                    <ul class="list_style instafeed d-flex flex-wrap">
                        <li><img src="assets/userstyle/image/instagram/Image-01.jpg" alt=""></li>
                        <li><img src="assets/userstyle/image/instagram/Image-02.jpg" alt=""></li>
                        <li><img src="assets/userstyle/image/instagram/Image-03.jpg" alt=""></li>
                        <li><img src="assets/userstyle/image/instagram/Image-04.jpg" alt=""></li>
                        <li><img src="assets/userstyle/image/instagram/Image-05.jpg" alt=""></li>
                        <li><img src="assets/userstyle/image/instagram/Image-06.jpg" alt=""></li>
                        <li><img src="assets/userstyle/image/instagram/Image-07.jpg" alt=""></li>
                        <li><img src="assets/userstyle/image/instagram/Image-08.jpg" alt=""></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="border_line"></div>
        <div class="row footer-bottom d-flex justify-content-between align-items-center">
            <p class="col-lg-8 col-sm-12 footer-text m-0">
                <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                Copyright &copy;
                <script>document.write(new Date().getFullYear());</script> All rights reserved | This template is
                made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com"
                    target="_blank">Colorlib</a>
                <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            </p>
            <div class="col-lg-4 col-sm-12 footer-social">
                <a href="#"><i class="fa fa-facebook"></i></a>
                <a href="#"><i class="fa fa-twitter"></i></a>
                <a href="#"><i class="fa fa-dribbble"></i></a>
                <a href="#"><i class="fa fa-behance"></i></a>
            </div>
        </div>
    </div>
</footer>